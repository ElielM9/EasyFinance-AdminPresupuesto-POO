const expensesList=document.querySelector("#expenses ul");let budget;function startApp(){requestName(),requestBudget(),budgetFormEvents()}document.addEventListener("DOMContentLoaded",startApp);class Budget{constructor(e){this.budgetTotal=e,this.budgetAvailable=e,this.budgetSpent=0,this.expenses=[]}newExpenses(e){e.inputAmount>this.budgetAvailable?userInterface.printAlerts("No tienes fondos suficientes","error"):(this.expenses=[...this.expenses,e],this.calculateSpent(),userInterface.printAlerts("Se agregó correctamente","success"))}calculateSpent(){this.budgetSpent=this.expenses.reduce((e,t)=>e+t.inputAmount,0),this.budgetAvailable=this.budgetTotal-this.budgetSpent}}class UserInterface{insertName(e){document.querySelector(".budget__heading--user-name").textContent=e+"!"}insertBudget(e){const{budgetTotal:t,budgetAvailable:n,budgetSpent:r}=e;let s=t.toLocaleString("es-MX",{style:"currency",currency:"MXN"}),u=n.toLocaleString("es-MX",{style:"currency",currency:"MXN"}),o=r.toLocaleString("es-MX",{style:"currency",currency:"MXN"});document.querySelector("#budgetCardTotal").textContent=""+s,document.querySelector("#budgetCardAvailable").textContent=""+u,document.querySelector("#budgetCardSpent").textContent=""+o}printAlerts(e,t){const n=document.createElement("p");n.classList.add("alert"),"error"===t?n.classList.add("alert--error"):n.classList.add("alert--success"),n.textContent=e;document.querySelector("#budgetForm").appendChild(n),setTimeout(()=>{n.remove()},3e3)}addExpenseList(e){this.cleanHtml(),e.forEach(e=>{const{inputName:t,inputAmount:n,selectedCategory:r,id:s}=e,u=n.toLocaleString("es-MX",{style:"currency",currency:"MXN"}),o=document.createElement("li");o.className="expense-item",o.dataset.id=s,o.dataset.category=r,o.innerHTML=`\n        <div class="expense-item__texts">\n          <p class="expense-item__description">${t}</p>\n          <p class="expense-item__price">${u}</p>\n        </div>\n      `;const c=document.createElement("button");c.classList.add("expense-item__btn"),c.textContent="X",o.appendChild(c),expensesList.appendChild(o)})}cleanHtml(){for(;expensesList.firstChild;)expensesList.removeChild(expensesList.firstChild)}updateAvailableBudget(e,t){let n=e.toLocaleString("es-MX",{style:"currency",currency:"MXN"}),r=t.toLocaleString("es-MX",{style:"currency",currency:"MXN"});document.querySelector("#budgetCardAvailable").textContent=""+n,document.querySelector("#budgetCardSpent").textContent=""+r}checkBudget(e){const{budgetTotal:t,budgetAvailable:n}=e,r=document.querySelector(".budget-form__btn");n<=0?(userInterface.printAlerts("El presupuesto se ha agotado","error"),r.disabled=!0):r.disabled=!1}}const userInterface=new UserInterface;function requestName(){let e;do{e=prompt("¿Cuál es tu nombre?"),e||alert("Por favor, introduce un nombre válido.")}while(!e);userInterface.insertName(e)}function requestBudget(){const e=Number(prompt("¿Cuál es tu presupuesto?"));(""===e||null===e||isNaN(e)||e<=0)&&window.location.reload(),budget=new Budget(e),userInterface.insertBudget(budget)}function budgetFormEvents(){document.querySelector("#budgetForm").addEventListener("submit",addExpense)}function addExpense(e){e.preventDefault();const t=document.querySelector("#budgetFormName").value,n=Number(document.querySelector("#budgetFormAmount").value),r=document.querySelector("#budgetFormCategory").value;if(""===t||""===n||""===r)return void userInterface.printAlerts("Todos los campos son obligatorios","error");if(n<=0||isNaN(n))return void userInterface.printAlerts("Cantidad no valida","error");const s={inputName:t,inputAmount:n,selectedCategory:r,id:Date.now()};budget.newExpenses(s);const{expenses:u,budgetAvailable:o,budgetSpent:c}=budget;userInterface.addExpenseList(u),userInterface.updateAvailableBudget(o,c),userInterface.checkBudget(budget);document.querySelector("#budgetForm").reset()}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZXhwZW5zZXNMaXN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVkZ2V0Iiwic3RhcnRBcHAiLCJyZXF1ZXN0TmFtZSIsInJlcXVlc3RCdWRnZXQiLCJidWRnZXRGb3JtRXZlbnRzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkJ1ZGdldCIsIltvYmplY3QgT2JqZWN0XSIsImJ1ZGdldFRvdGFsIiwidGhpcyIsImJ1ZGdldEF2YWlsYWJsZSIsImJ1ZGdldFNwZW50IiwiZXhwZW5zZXMiLCJleHBlbnNlIiwiaW5wdXRBbW91bnQiLCJ1c2VySW50ZXJmYWNlIiwicHJpbnRBbGVydHMiLCJjYWxjdWxhdGVTcGVudCIsInJlZHVjZSIsInRvdGFsIiwiVXNlckludGVyZmFjZSIsInVzZXJOYW1lIiwidGV4dENvbnRlbnQiLCJxdWFudGl0eSIsImZvcm1hdHRlZFRvdGFsIiwidG9Mb2NhbGVTdHJpbmciLCJzdHlsZSIsImN1cnJlbmN5IiwiZm9ybWF0dGVkQXZhaWxhYmxlIiwiZm9ybWF0dGVkU3BlbnQiLCJtZXNzYWdlIiwidHlwZUFsZXJ0IiwiYWxlcnRNZXNzYWdlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInJlbW92ZSIsImNsZWFuSHRtbCIsImZvckVhY2giLCJpbnB1dE5hbWUiLCJzZWxlY3RlZENhdGVnb3J5IiwiaWQiLCJmb3JtYXR0ZWRBbW91bnQiLCJleHBlbnNlSXRlbSIsImNsYXNzTmFtZSIsImRhdGFzZXQiLCJjYXRlZ29yeSIsImlubmVySFRNTCIsImRlbGV0ZUJ0biIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImF2YWlsYWJsZSIsInNwZW50IiwiYnVkZ2V0T2JqIiwiYnVkZ2V0Rm9ybUJ0biIsImRpc2FibGVkIiwicHJvbXB0IiwiYWxlcnQiLCJpbnNlcnROYW1lIiwidXNlckJ1ZGdldCIsIk51bWJlciIsImlzTmFOIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJpbnNlcnRCdWRnZXQiLCJhZGRFeHBlbnNlIiwiZSIsInByZXZlbnREZWZhdWx0IiwidmFsdWUiLCJEYXRlIiwibm93IiwibmV3RXhwZW5zZXMiLCJhZGRFeHBlbnNlTGlzdCIsInVwZGF0ZUF2YWlsYWJsZUJ1ZGdldCIsImNoZWNrQnVkZ2V0IiwicmVzZXQiXSwibWFwcGluZ3MiOiJBQUNBLE1BQU1BLGFBQWVDLFNBQVNDLGNBQWMsZ0JBQzVDLElBQUlDLE9BS0osU0FBU0MsV0FDUEMsY0FDQUMsZ0JBQ0FDLG1CQUxGTixTQUFTTyxpQkFBaUIsbUJBQW9CSixVQVM5QyxNQUFNSyxPQUNKQyxZQUFZQyxHQUNWQyxLQUFLRCxZQUFjQSxFQUNuQkMsS0FBS0MsZ0JBQWtCRixFQUN2QkMsS0FBS0UsWUFBYyxFQUNuQkYsS0FBS0csU0FBVyxHQUdsQkwsWUFBWU0sR0FFTkEsRUFBUUMsWUFBY0wsS0FBS0MsZ0JBQzdCSyxjQUFjQyxZQUFZLCtCQUFnQyxVQU01RFAsS0FBS0csU0FBVyxJQUFJSCxLQUFLRyxTQUFVQyxHQUNuQ0osS0FBS1EsaUJBR0xGLGNBQWNDLFlBQVksMEJBQTJCLFlBR3ZEVCxpQkFDRUUsS0FBS0UsWUFBY0YsS0FBS0csU0FBU00sT0FDL0IsQ0FBQ0MsRUFBT04sSUFBWU0sRUFBUU4sRUFBUUMsWUFDcEMsR0FFRkwsS0FBS0MsZ0JBQWtCRCxLQUFLRCxZQUFjQyxLQUFLRSxhQUluRCxNQUFNUyxjQUNKYixXQUFXYyxHQUNjdkIsU0FBU0MsY0FDOUIsK0JBSWF1QixZQUFpQkQsRUFBSCxJQUcvQmQsYUFBYWdCLEdBQ1gsTUFBTWYsWUFBRUEsRUFBV0UsZ0JBQUVBLEVBQWVDLFlBQUVBLEdBQWdCWSxFQUd0RCxJQUFJQyxFQUFpQmhCLEVBQVlpQixlQUFlLFFBQVMsQ0FDdkRDLE1BQU8sV0FDUEMsU0FBVSxRQUVSQyxFQUFxQmxCLEVBQWdCZSxlQUFlLFFBQVMsQ0FDL0RDLE1BQU8sV0FDUEMsU0FBVSxRQUVSRSxFQUFpQmxCLEVBQVljLGVB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WSxxQkFBc0IsU0FNbEQsTUFBTUgsRUFBVSxDQUFFNEIsVUFBQUEsRUFBVzNCLFlBQUFBLEVBQWE0QixpQkFBQUEsRUFBa0JDLEdBQUk2QixLQUFLQyxPQUdyRXpFLE9BQU8wRSxZQUFZN0QsR0FHbkIsTUFBTUQsU0FBRUEsRUFBUUYsZ0JBQUVBLEVBQWVDLFlBQUVBLEdBQWdCWCxPQUduRGUsY0FBYzRELGVBQWUvRCxHQUc3QkcsY0FBYzZELHNCQUFzQmxFLEVBQWlCQyxHQUdyREksY0FBYzhELFlBQVk3RSxRQUdQRixTQUFTQyxjQUFjLGVBQy9CK0UiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIFZhcmlhYmxlcyB5IHNlbGVjdG9yZXMgKi9cbmNvbnN0IGV4cGVuc2VzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNleHBlbnNlcyB1bGApO1xubGV0IGJ1ZGdldDtcblxuLyogRXZlbnRvcyAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihgRE9NQ29udGVudExvYWRlZGAsIHN0YXJ0QXBwKTtcblxuZnVuY3Rpb24gc3RhcnRBcHAoKSB7XG4gIHJlcXVlc3ROYW1lKCk7XG4gIHJlcXVlc3RCdWRnZXQoKTtcbiAgYnVkZ2V0Rm9ybUV2ZW50cygpO1xufVxuXG4vKiBDbGFzZXMgKi9cbmNsYXNzIEJ1ZGdldCB7XG4gIGNvbnN0cnVjdG9yKGJ1ZGdldFRvdGFsKSB7XG4gICAgdGhpcy5idWRnZXRUb3RhbCA9IGJ1ZGdldFRvdGFsO1xuICAgIHRoaXMuYnVkZ2V0QXZhaWxhYmxlID0gYnVkZ2V0VG90YWw7XG4gICAgdGhpcy5idWRnZXRTcGVudCA9IDA7XG4gICAgdGhpcy5leHBlbnNlcyA9IFtdO1xuICB9XG5cbiAgbmV3RXhwZW5zZXMoZXhwZW5zZSkge1xuICAgIC8vIFZhbGlkYXIgcXVlIGVsIG1vbnRvIGludHJvZHVjaWRvIG5vIHNlYSBtYXlvciBhbCBwcmVzdXB1ZXN0byBkaXNwb25pYmxlXG4gICAgaWYgKGV4cGVuc2UuaW5wdXRBbW91bnQgPiB0aGlzLmJ1ZGdldEF2YWlsYWJsZSkge1xuICAgICAgdXNlckludGVyZmFjZS5wcmludEFsZXJ0cyhgTm8gdGllbmVzIGZvbmRvcyBzdWZpY2llbnRlc2AsIGBlcnJvcmApO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQcOxYWRpciBlbCBnYXN0byBhIGxhIGxpc3RhIGRlIGdhc3Rvc1xuICAgIHRoaXMuZXhwZW5zZXMgPSBbLi4udGhpcy5leHBlbnNlcywgZXhwZW5zZV07XG4gICAgdGhpcy5jYWxjdWxhdGVTcGVudCgpO1xuXG4gICAgLy8gSW1wcmltaXIgdW5hIGFsZXJ0YSBkZSBleGl0b1xuICAgIHVzZXJJbnRlcmZhY2UucHJpbnRBbGVydHMoYFNlIGFncmVnw7MgY29ycmVjdGFtZW50ZWAsIGBzdWNjZXNzYCk7XG4gIH1cblxuICBjYWxjdWxhdGVTcGVudCgpIHtcbiAgICB0aGlzLmJ1ZGdldFNwZW50ID0gdGhpcy5leHBlbnNlcy5yZWR1Y2UoXG4gICAgICAodG90YWwsIGV4cGVuc2UpID0+IHRvdGFsICsgZXhwZW5zZS5pbnB1dEFtb3VudCxcbiAgICAgIDBcbiAgICApO1xuICAgIHRoaXMuYnVkZ2V0QXZhaWxhYmxlID0gdGhpcy5idWRnZXRUb3RhbCAtIHRoaXMuYnVkZ2V0U3BlbnQ7XG4gIH1cbn1cblxuY2xhc3MgVXNlckludGVyZmFjZSB7XG4gIGluc2VydE5hbWUodXNlck5hbWUpIHtcbiAgICBjb25zdCBidWRnZXRVc2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLmJ1ZGdldF9faGVhZGluZy0tdXNlci1uYW1lYFxuICAgICk7XG5cbiAgICAvLyBJbnNlcnRhciBlbCBub21icmUgZGVsIHVzdWFyaW8gZW4gZWwgSFRNTFxuICAgIGJ1ZGdldFVzZXJOYW1lLnRleHRDb250ZW50ID0gYCR7dXNlck5hbWV9IWA7XG4gIH1cblxuICBpbnNlcnRCdWRnZXQocXVhbnRpdHkpIHtcbiAgICBjb25zdCB7IGJ1ZGdldFRvdGFsLCBidWRnZXRBdmFpbGFibGUsIGJ1ZGdldFNwZW50IH0gPSBxdWFudGl0eTtcblxuICAgIC8vIEZvcm1hdGVhciBlbCB0b3RhbCB5IGRpc3BvbmlibGUgZW4gbW9uZWRhIGxvY2FsIE1YTlxuICAgIGxldCBmb3JtYXR0ZWRUb3RhbCA9IGJ1ZGdldFRvdGFsLnRvTG9jYWxlU3RyaW5nKFwiZXMtTVhcIiwge1xuICAgICAgc3R5bGU6IFwiY3VycmVuY3lcIixcbiAgICAgIGN1cnJlbmN5OiBcIk1YTlwiLFxuICAgIH0pO1xuICAgIGxldCBmb3JtYXR0ZWRBdmFpbGFibGUgPSBidWRnZXRBdmFpbGFibGUudG9Mb2NhbGVTdHJpbmcoXCJlcy1NWFwiLCB7XG4gICAgICBzdHlsZTogXCJjdXJyZW5jeVwiLFxuICAgICAgY3VycmVuY3k6IFwiTVhOXCIsXG4gICAgfSk7XG4gICAgbGV0IGZvcm1hdHRlZFNwZW50ID0gYnVkZ2V0U3BlbnQudG9Mb2NhbGVTdHJpbmcoXCJlcy1NWFwiLCB7XG4gICAgICBzdHlsZTogXCJjdXJyZW5jeVwiLFxuICAgICAgY3VycmVuY3k6IFwiTVhOXCIsXG4gICAgfSk7XG5cbiAgICAvLyBJbnNlcnRhciBlbCB0b3RhbCB5IGRpc3BvbmlibGUgZW4gZWwgSFRNTFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgI2J1ZGdldENhcmRUb3RhbGBcbiAgICApLnRleHRDb250ZW50ID0gYCR7Zm9ybWF0dGVkVG90YWx9YDtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCNidWRnZXRDYXJkQXZhaWxhYmxlYFxuICAgICkudGV4dENvbnRlbnQgPSBgJHtmb3JtYXR0ZWRBdmFpbGFibGV9YDtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCNidWRnZXRDYXJkU3BlbnRgXG4gICAgKS50ZXh0Q29udGVudCA9IGAke2Zvcm1hdHRlZFNwZW50fWA7XG4gIH1cblxuICBwcmludEFsZXJ0cyhtZXNzYWdlLCB0eXBlQWxlcnQpIHtcbiAgICAvLyBDcmVhciBlbCBkaXYgZGUgbGEgYWxlcnRhXG4gICAgY29uc3QgYWxlcnRNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgcGApO1xuICAgIGFsZXJ0TWVzc2FnZS5jbGFzc0xpc3QuYWRkKGBhbGVydGApO1xuXG4gICAgLy8gQWdyZWdhciBlbCBtZW5zYWplIHkgZWwgdGlwbyBkZSBhbGVydGEgYWwgcCBkZSBsYSBhbGVydGFcbiAgICBpZiAodHlwZUFsZXJ0ID09PSBgZXJyb3JgKSB7XG4gICAgICBhbGVydE1lc3NhZ2UuY2xhc3NMaXN0LmFkZChgYWxlcnQtLWVycm9yYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0TWVzc2FnZS5jbGFzc0xpc3QuYWRkKGBhbGVydC0tc3VjY2Vzc2ApO1xuICAgIH1cblxuICAgIC8vIEFncmVnYXIgYWwgZGl2IGVsIG1lbnNhamVcbiAgICBhbGVydE1lc3NhZ2UudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuXG4gICAgLy8gSW5zZXJ0YXIgbGEgYWxlcnRhIGFsIEhUTUxcbiAgICBjb25zdCBidWRnZXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2J1ZGdldEZvcm1gKTtcbiAgICBidWRnZXRGb3JtLmFwcGVuZENoaWxkKGFsZXJ0TWVzc2FnZSk7XG5cbiAgICAvLyBFbGltaW5hciBsYSBhbGVydGEgZGVzcHXDqXMgZGUgMyBzZWd1bmRvc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYWxlcnRNZXNzYWdlLnJlbW92ZSgpO1xuICAgIH0sIDMwMDApO1xuICB9XG5cbiAgYWRkRXhwZW5zZUxpc3QoZXhwZW5zZXMpIHtcbiAgICAvLyBMaW1waWFyIGxhIGxpc3RhIGRlIGdhc3Rvc1xuICAgIHRoaXMuY2xlYW5IdG1sKCk7XG5cbiAgICAvLyBJdGVyYXIgbG9zIGdhc3Rvc1xuICAgIGV4cGVuc2VzLmZvckVhY2goKGV4cGVuc2UpID0+IHtcbiAgICAgIGNvbnN0IHsgaW5wdXROYW1lLCBpbnB1dEFtb3VudCwgc2VsZWN0ZWRDYXRlZ29yeSwgaWQgfSA9IGV4cGVuc2U7XG5cbiAgICAgIC8vIEZvcm1hdGVhciBsYSBjYW50aWRhZFxuICAgICAgY29uc3QgZm9ybWF0dGVkQW1vdW50ID0gaW5wdXRBbW91bnQudG9Mb2NhbGVTdHJpbmcoXCJlcy1NWFwiLCB7XG4gICAgICAgIHN0eWxlOiBcImN1cnJlbmN5XCIsXG4gICAgICAgIGN1cnJlbmN5OiBcIk1YTlwiLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWFyIGVsIExpXG4gICAgICBjb25zdCBleHBlbnNlSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYGxpYCk7XG4gICAgICBleHBlbnNlSXRlbS5jbGFzc05hbWUgPSBgZXhwZW5zZS1pdGVtYDtcbiAgICAgIGV4cGVuc2VJdGVtLmRhdGFzZXQuaWQgPSBpZDtcbiAgICAgIGV4cGVuc2VJdGVtLmRhdGFzZXQuY2F0ZWdvcnkgPSBzZWxlY3RlZENhdGVnb3J5O1xuXG4gICAgICAvLyBBZ3JlZ2FyIGVsIEhUTUxcbiAgICAgIGV4cGVuc2VJdGVtLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImV4cGVuc2UtaXRlbV9fdGV4dHNcIj5cbiAgICAgICAgICA8cCBjbGFzcz1cImV4cGVuc2UtaXRlbV9fZGVzY3JpcHRpb25cIj4ke2lucHV0TmFtZX08L3A+XG4gICAgICAgICAgPHAgY2xhc3M9XCJleHBlbnNlLWl0ZW1fX3ByaWNlXCI+JHtmb3JtYXR0ZWRBbW91bnR9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG5cbiAgICAgIC8vIEJvdMOzbiBwYXJhIGJvcnJhciBlbCBnYXN0b1xuICAgICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgYnV0dG9uYCk7XG4gICAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChgZXhwZW5zZS1pdGVtX19idG5gKTtcbiAgICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9IGBYYDtcblxuICAgICAgLy8gQcOxYWRpciBlbCBib3TDs24gYWwgTGlcbiAgICAgIGV4cGVuc2VJdGVtLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG5cbiAgICAgIC8vIEHDsWFkaXIgZWwgTGkgYWwgVWxcbiAgICAgIGV4cGVuc2VzTGlzdC5hcHBlbmRDaGlsZChleHBlbnNlSXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBjbGVhbkh0bWwoKSB7XG4gICAgd2hpbGUgKGV4cGVuc2VzTGlzdC5maXJzdENoaWxkKSB7XG4gICAgICBleHBlbnNlc0xpc3QucmVtb3ZlQ2hpbGQoZXhwZW5zZXNMaXN0LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUF2YWlsYWJsZUJ1ZGdldChhdmFpbGFibGUsIHNwZW50KSB7XG4gICAgbGV0IGZvcm1hdHRlZEF2YWlsYWJsZSA9IGF2YWlsYWJsZS50b0xvY2FsZVN0cmluZyhcImVzLU1YXCIsIHtcbiAgICAgIHN0eWxlOiBcImN1cnJlbmN5XCIsXG4gICAgICBjdXJyZW5jeTogXCJNWE5cIixcbiAgICB9KTtcbiAgICBsZXQgZm9ybWF0dGVkU3BlbnQgPSBzcGVudC50b0xvY2FsZVN0cmluZyhcImVzLU1YXCIsIHtcbiAgICAgIHN0eWxlOiBcImN1cnJlbmN5XCIsXG4gICAgICBjdXJyZW5jeTogXCJNWE5cIixcbiAgICB9KTtcblxuICAgIC8vIEFjdHVhbGl6YXIgZWwgZGlzcG9uaWJsZSB5IGVsIGdhc3RhZG8gZW4gZWwgSFRNTFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgI2J1ZGdldENhcmRBdmFpbGFibGVgXG4gICAgKS50ZXh0Q29udGVudCA9IGAke2Zvcm1hdHRlZEF2YWlsYWJsZX1gO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgI2J1ZGdldENhcmRTcGVudGBcbiAgICApLnRleHRDb250ZW50ID0gYCR7Zm9ybWF0dGVkU3BlbnR9YDtcbiAgfVxuXG4gIGNoZWNrQnVkZ2V0KGJ1ZGdldE9iaikge1xuICAgIGNvbnN0IHsgYnVkZ2V0VG90YWwsIGJ1ZGdldEF2YWlsYWJsZSB9ID0gYnVkZ2V0T2JqO1xuXG4gICAgLyogICBpZiAoYnVkZ2V0VG90YWwgLyA0ID4gYnVkZ2V0QXZhaWxhYmxlKSB7XG4gICAgICBjb25zb2xlLmxvZyhgR2FzdGFzdGUgZWwgNzUlYCk7XG4gICAgfSBlbHNlIGlmIChidWRnZXRUb3RhbCAvIDIgPiBidWRnZXRBdmFpbGFibGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBHYXN0YXN0ZSBlbCA1MCVgKTtcbiAgICB9ICovXG5cbiAgICBjb25zdCBidWRnZXRGb3JtQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmJ1ZGdldC1mb3JtX19idG5gKTtcblxuICAgIC8vIERlc2FjdGl2YXIgZWwgYm90w7NuIGRlIGFncmVnYXIgZ2FzdG8gc2kgZWwgcHJlc3VwdWVzdG8gZXN0w6EgYWdvdGFkb1xuICAgIGlmIChidWRnZXRBdmFpbGFibGUgPD0gMCkge1xuICAgICAgdXNlckludGVyZmFjZS5wcmludEFsZXJ0cyhgRWwgcHJlc3VwdWVzdG8gc2UgaGEgYWdvdGFkb2AsIGBlcnJvcmApO1xuICAgICAgYnVkZ2V0Rm9ybUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1ZGdldEZvcm1CdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn1cblxuLy8gSW5zdGFuY2lhciBsYSBVSVxuY29uc3QgdXNlckludGVyZmFjZSA9IG5ldyBVc2VySW50ZXJmYWNlKCk7XG5cbi8qIEZ1bmNpb25lcyAqL1xuZnVuY3Rpb24gcmVxdWVzdE5hbWUoKSB7XG4gIGxldCB1c2VyTmFtZTtcblxuICAvLyBTb2xpY2l0YXIgZWwgbm9tYnJlIGRlbCB1c3VhcmlvIGhhc3RhIHF1ZSBzZSBpbmdyZXNlIHVuIHZhbG9yIHbDoWxpZG9cbiAgZG8ge1xuICAgIHVzZXJOYW1lID0gcHJvbXB0KGDCv0N1w6FsIGVzIHR1IG5vbWJyZT9gKTtcblxuICAgIC8vIFZhbGlkYXIgZWwgbm9tYnJlXG4gICAgaWYgKCF1c2VyTmFtZSkge1xuICAgICAgYWxlcnQoYFBvciBmYXZvciwgaW50cm9kdWNlIHVuIG5vbWJyZSB2w6FsaWRvLmApO1xuICAgIH1cbiAgfSB3aGlsZSAoIXVzZXJOYW1lKTtcblxuICAvLyBMbGFtYXIgYWwgbcOpdG9kbyBwYXJhIGluc2VydGFyIGVsIG5vbWJyZSBlbiBsYSBVSVxuICB1c2VySW50ZXJmYWNlLmluc2VydE5hbWUodXNlck5hbWUpO1xufVxuXG5mdW5jdGlvbiByZXF1ZXN0QnVkZ2V0KCkge1xuICBjb25zdCB1c2VyQnVkZ2V0ID0gTnVtYmVyKHByb21wdChgwr9DdcOhbCBlcyB0dSBwcmVzdXB1ZXN0bz9gKSk7XG4gIGNvbnN0IHZvaWRWYWx1ZSA9IGBgO1xuXG4gIGlmIChcbiAgICB1c2VyQnVkZ2V0ID09PSB2b2lkVmFsdWUgfHxcbiAgICB1c2VyQnVkZ2V0ID09PSBudWxsIHx8XG4gICAgaXNOYU4odXNlckJ1ZGdldCkgfHxcbiAgICB1c2VyQnVkZ2V0IDw9IDBcbiAgKSB7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICB9XG5cbiAgLy8gQ3JlYXIgaW5zdGFuY2lhIGRlIFwiQnVkZ2V0XCIgeSBlc3RhYmxlY2VybG9cbiAgYnVkZ2V0ID0gbmV3IEJ1ZGdldCh1c2VyQnVkZ2V0KTtcblxuICAvLyBMbGFtYXIgYWwgbcOpdG9kbyBwYXJhIGluc2VydGFyIGVsIHByZXN1cHVlc3RvIGVuIGxhIFVJXG4gIHVzZXJJbnRlcmZhY2UuaW5zZXJ0QnVkZ2V0KGJ1ZGdldCk7XG59XG5cbmZ1bmN0aW9uIGJ1ZGdldEZvcm1FdmVudHMoKSB7XG4gIC8vIE9idGVuZXIgZWwgZm9ybXVsYXJpbyB5IHN1cyBldmVudG9zXG4gIGNvbnN0IGJ1ZGdldEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjYnVkZ2V0Rm9ybWApO1xuICBidWRnZXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoYHN1Ym1pdGAsIGFkZEV4cGVuc2UpO1xufVxuXG5mdW5jdGlvbiBhZGRFeHBlbnNlKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIC8vIE9idGVuZXIgbG9zIHZhbG9yZXMgZGVsIGZvcm11bGFyaW9cbiAgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2J1ZGdldEZvcm1OYW1lYCkudmFsdWU7XG4gIGNvbnN0IGlucHV0QW1vdW50ID0gTnVtYmVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNidWRnZXRGb3JtQW1vdW50YCkudmFsdWUpO1xuICBjb25zdCBzZWxlY3RlZENhdGVnb3J5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2J1ZGdldEZvcm1DYXRlZ29yeWApLnZhbHVlO1xuICBsZXQgdm9pZFZhbHVlID0gYGA7XG5cbiAgLy8gVmFsaWRhciBxdWUgbmluZ3VubyBkZSBsb3MgY2FtcG9zIGVzdMOpIHZhY8Otb1xuICBpZiAoXG4gICAgaW5wdXROYW1lID09PSB2b2lkVmFsdWUgfHxcbiAgICBpbnB1dEFtb3VudCA9PT0gdm9pZFZhbHVlIHx8XG4gICAgc2VsZWN0ZWRDYXRlZ29yeSA9PT0gdm9pZFZhbHVlXG4gICkge1xuICAgIHVzZXJJbnRlcmZhY2UucHJpbnRBbGVydHMoYFRvZG9zIGxvcyBjYW1wb3Mgc29uIG9ibGlnYXRvcmlvc2AsIGBlcnJvcmApO1xuXG4gICAgcmV0dXJuO1xuICB9IGVsc2UgaWYgKGlucHV0QW1vdW50IDw9IDAgfHwgaXNOYU4oaW5wdXRBbW91bnQpKSB7XG4gICAgdXNlckludGVyZmFjZS5wcmludEFsZXJ0cyhgQ2FudGlkYWQgbm8gdmFsaWRhYCwgYGVycm9yYCk7XG5cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBDcmVhciBvYmpldG8gY29uIGVsIGdhc3RvXG4gIGNvbnN0IGV4cGVuc2UgPSB7IGlucHV0TmFtZSwgaW5wdXRBbW91bnQsIHNlbGVjdGVkQ2F0ZWdvcnksIGlkOiBEYXRlLm5vdygpIH07XG5cbiAgLy8gQcOxYWRpciBlbCBnYXN0byBhIGxhIGxpc3RhIHkgYWwgcHJlc3VwdWVzdG9cbiAgYnVkZ2V0Lm5ld0V4cGVuc2VzKGV4cGVuc2UpO1xuXG4gIC8vIE9idGVuZXIgbG9zIHZhbG9yZXMgYWN0dWFsZXMgZGVsIHByZXN1cHVlc3RvIHkgZ2FzdG9cbiAgY29uc3QgeyBleHBlbnNlcywgYnVkZ2V0QXZhaWxhYmxlLCBidWRnZXRTcGVudCB9ID0gYnVkZ2V0O1xuXG4gIC8vIEltcHJpbWlyIGVsIGdhc3RvIGVuIGVsIEhUTUxcbiAgdXNlckludGVyZmFjZS5hZGRFeHBlbnNlTGlzdChleHBlbnNlcyk7XG5cbiAgLy8gQWN0dWFsaXphciBlbCBwcmVzdXB1ZXN0byBlbiBsYSBVSVxuICB1c2VySW50ZXJmYWNlLnVwZGF0ZUF2YWlsYWJsZUJ1ZGdldChidWRnZXRBdmFpbGFibGUsIGJ1ZGdldFNwZW50KTtcblxuICAvLyBMbGFtYXIgYWwgbcOpdG9kbyBwYXJhIGNvbXByb2JhciBzaSBzZSBoYSBhbGNhbnphZG8gZWwgcHJlc3VwdWVzdG9cbiAgdXNlckludGVyZmFjZS5jaGVja0J1ZGdldChidWRnZXQpO1xuXG4gIC8vIExpbXBpYXIgbG9zIGNhbXBvcyBkZWwgZm9ybXVsYXJpb1xuICBjb25zdCBidWRnZXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2J1ZGdldEZvcm1gKTtcbiAgYnVkZ2V0Rm9ybS5yZXNldCgpO1xufVxuIl19
