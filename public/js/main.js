const expensesList=document.querySelector("#expenses ul");let budget;function startApp(){requestName(),requestBudget(),budgetFormEvents()}document.addEventListener("DOMContentLoaded",startApp);class Budget{constructor(e){this.budgetTotal=e,this.budgetAvailable=e,this.budgetSpent=0,this.expenses=[]}newExpenses(e){this.expenses=[...this.expenses,e]}}class UserInterface{insertName(e){document.querySelector(".budget__heading--user-name").textContent=e+"!"}insertBudget(e){const{budgetTotal:t,budgetAvailable:n,budgetSpent:r}=e;let s=t.toLocaleString("es-MX",{style:"currency",currency:"MXN"}),o=n.toLocaleString("es-MX",{style:"currency",currency:"MXN"}),u=r.toLocaleString("es-MX",{style:"currency",currency:"MXN"});document.querySelector("#budgetCardTotal").textContent=""+s,document.querySelector("#budgetCardAvailable").textContent=""+o,document.querySelector("#budgetCardSpent").textContent=""+u}printAlerts(e,t){const n=document.createElement("p");n.classList.add("alert"),"error"===t?n.classList.add("alert--error"):n.classList.add("alert--success"),n.textContent=e;document.querySelector("#budgetForm").appendChild(n),setTimeout(()=>{n.remove()},3e3)}addExpenseList(e){this.cleanHtml(),e.forEach(e=>{const{inputName:t,inputAmount:n,selectedCategory:r,id:s}=e,o=n.toLocaleString("es-MX",{style:"currency",currency:"MXN"}),u=document.createElement("li");u.className="expense-item",u.dataset.id=s,u.dataset.category=r,u.innerHTML=`\n        <div class="expense-item__texts">\n          <p class="expense-item__description">${t}</p>\n          <p class="expense-item__price">${o}</p>\n        </div>\n      `;const c=document.createElement("button");c.classList.add("expense-item__btn"),c.textContent="X",u.appendChild(c),expensesList.appendChild(u)})}cleanHtml(){for(;expensesList.firstChild;)expensesList.removeChild(expensesList.firstChild)}}const userInterface=new UserInterface;function requestName(){let e;do{e=prompt("¿Cuál es tu nombre?"),e||alert("Por favor, introduce un nombre válido.")}while(!e);userInterface.insertName(e)}function requestBudget(){const e=Number(prompt("¿Cuál es tu presupuesto?"));(""===e||null===e||isNaN(e)||e<=0)&&window.location.reload(),budget=new Budget(e),userInterface.insertBudget(budget)}function budgetFormEvents(){document.querySelector("#budgetForm").addEventListener("submit",addExpense)}function addExpense(e){e.preventDefault();const t=document.querySelector("#budgetFormName").value,n=Number(document.querySelector("#budgetFormAmount").value),r=document.querySelector("#budgetFormCategory").value;if(""===t||""===n||""===r)return void userInterface.printAlerts("Todos los campos son obligatorios","error");if(n<=0||isNaN(n))return void userInterface.printAlerts("Cantidad no valida","error");const s={inputName:t,inputAmount:n,selectedCategory:r,id:Date.now()};budget.newExpenses(s),userInterface.printAlerts("Se agregó correctamente","success");const{expenses:o}=budget;userInterface.addExpenseList(o);document.querySelector("#budgetForm").reset()}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZXhwZW5zZXNMaXN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVkZ2V0Iiwic3RhcnRBcHAiLCJyZXF1ZXN0TmFtZSIsInJlcXVlc3RCdWRnZXQiLCJidWRnZXRGb3JtRXZlbnRzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkJ1ZGdldCIsIltvYmplY3QgT2JqZWN0XSIsImJ1ZGdldFRvdGFsIiwidGhpcyIsImJ1ZGdldEF2YWlsYWJsZSIsImJ1ZGdldFNwZW50IiwiZXhwZW5zZXMiLCJleHBlbnNlIiwiVXNlckludGVyZmFjZSIsInVzZXJOYW1lIiwidGV4dENvbnRlbnQiLCJxdWFudGl0eSIsImZvcm1hdHRlZFRvdGFsIiwidG9Mb2NhbGVTdHJpbmciLCJzdHlsZSIsImN1cnJlbmN5IiwiZm9ybWF0dGVkQXZhaWxhYmxlIiwiZm9ybWF0dGVkU3BlbnQiLCJtZXNzYWdlIiwidHlwZUFsZXJ0IiwiYWxlcnRNZXNzYWdlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInJlbW92ZSIsImNsZWFuSHRtbCIsImZvckVhY2giLCJpbnB1dE5hbWUiLCJpbnB1dEFtb3VudCIsInNlbGVjdGVkQ2F0ZWdvcnkiLCJpZCIsImZvcm1hdHRlZEFtb3VudCIsIm5ld0V4cGVuc2UiLCJjbGFzc05hbWUiLCJkYXRhc2V0IiwiY2F0ZWdvcnkiLCJpbm5lckhUTUwiLCJkZWxldGVCdG4iLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJ1c2VySW50ZXJmYWNlIiwicHJvbXB0IiwiYWxlcnQiLCJpbnNlcnROYW1lIiwidXNlckJ1ZGdldCIsIk51bWJlciIsImlzTmFOIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJpbnNlcnRCdWRnZXQiLCJhZGRFeHBlbnNlIiwiZSIsInByZXZlbnREZWZhdWx0IiwidmFsdWUiLCJwcmludEFsZXJ0cyIsIkRhdGUiLCJub3ci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U0FBU0MsY0FBYyxxQkFBcUIrRCxPQUNqRXpCLEVBQW1CdkMsU0FBU0MsY0FBYyx1QkFBdUIrRCxNQUl2RSxHQUhnQixLQUlkM0IsR0FKYyxLQUtkQyxHQUxjLEtBTWRDLEVBSUEsWUFGQVcsY0FBY2UsWUFBWSxvQ0FBcUMsU0FHMUQsR0FBSTNCLEdBQWUsR0FBS2tCLE1BQU1sQixHQUduQyxZQUZBWSxjQUFjZSxZQUFZLHFCQUFzQixTQU1sRCxNQUFNbEQsRUFBVSxDQUFFc0IsVUFBQUEsRUFBV0MsWUFBQUEsRUFBYUMsaUJBQUFBLEVBQWtCQyxHQUFJMEIsS0FBS0MsT0FHckVqRSxPQUFPa0UsWUFBWXJELEdBR25CbUMsY0FBY2UsWUFBWSwwQkFBMkIsV0FHckQsTUFBTW5ELFNBQUVBLEdBQWFaLE9BQ3JCZ0QsY0FBY21CLGVBQWV2RCxHQUdWZCxTQUFTQyxjQUFjLGVBQy9CcUUiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIFZhcmlhYmxlcyB5IHNlbGVjdG9yZXMgKi9cbmNvbnN0IGV4cGVuc2VzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNleHBlbnNlcyB1bGApO1xubGV0IGJ1ZGdldDtcblxuLyogRXZlbnRvcyAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihgRE9NQ29udGVudExvYWRlZGAsIHN0YXJ0QXBwKTtcblxuZnVuY3Rpb24gc3RhcnRBcHAoKSB7XG4gIHJlcXVlc3ROYW1lKCk7XG4gIHJlcXVlc3RCdWRnZXQoKTtcbiAgYnVkZ2V0Rm9ybUV2ZW50cygpO1xufVxuXG4vKiBDbGFzZXMgKi9cbmNsYXNzIEJ1ZGdldCB7XG4gIGNvbnN0cnVjdG9yKGJ1ZGdldFRvdGFsKSB7XG4gICAgdGhpcy5idWRnZXRUb3RhbCA9IGJ1ZGdldFRvdGFsO1xuICAgIHRoaXMuYnVkZ2V0QXZhaWxhYmxlID0gYnVkZ2V0VG90YWw7XG4gICAgdGhpcy5idWRnZXRTcGVudCA9IDA7XG4gICAgdGhpcy5leHBlbnNlcyA9IFtdO1xuICB9XG5cbiAgbmV3RXhwZW5zZXMoZXhwZW5zZSkge1xuICAgIHRoaXMuZXhwZW5zZXMgPSBbLi4udGhpcy5leHBlbnNlcywgZXhwZW5zZV07XG4gICAgXG4gIH1cbn1cblxuY2xhc3MgVXNlckludGVyZmFjZSB7XG4gIGluc2VydE5hbWUodXNlck5hbWUpIHtcbiAgICBjb25zdCBidWRnZXRVc2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLmJ1ZGdldF9faGVhZGluZy0tdXNlci1uYW1lYFxuICAgICk7XG5cbiAgICAvLyBJbnNlcnRhciBlbCBub21icmUgZGVsIHVzdWFyaW8gZW4gZWwgSFRNTFxuICAgIGJ1ZGdldFVzZXJOYW1lLnRleHRDb250ZW50ID0gYCR7dXNlck5hbWV9IWA7XG4gIH1cblxuICBpbnNlcnRCdWRnZXQocXVhbnRpdHkpIHtcbiAgICBjb25zdCB7IGJ1ZGdldFRvdGFsLCBidWRnZXRBdmFpbGFibGUsIGJ1ZGdldFNwZW50IH0gPSBxdWFudGl0eTtcblxuICAgIC8vIEZvcm1hdGVhciBlbCB0b3RhbCB5IGRpc3BvbmlibGUgZW4gbW9uZWRhIGxvY2FsIE1YTlxuICAgIGxldCBmb3JtYXR0ZWRUb3RhbCA9IGJ1ZGdldFRvdGFsLnRvTG9jYWxlU3RyaW5nKFwiZXMtTVhcIiwge1xuICAgICAgc3R5bGU6IFwiY3VycmVuY3lcIixcbiAgICAgIGN1cnJlbmN5OiBcIk1YTlwiLFxuICAgIH0pO1xuICAgIGxldCBmb3JtYXR0ZWRBdmFpbGFibGUgPSBidWRnZXRBdmFpbGFibGUudG9Mb2NhbGVTdHJpbmcoXCJlcy1NWFwiLCB7XG4gICAgICBzdHlsZTogXCJjdXJyZW5jeVwiLFxuICAgICAgY3VycmVuY3k6IFwiTVhOXCIsXG4gICAgfSk7XG4gICAgbGV0IGZvcm1hdHRlZFNwZW50ID0gYnVkZ2V0U3BlbnQudG9Mb2NhbGVTdHJpbmcoXCJlcy1NWFwiLCB7XG4gICAgICBzdHlsZTogXCJjdXJyZW5jeVwiLFxuICAgICAgY3VycmVuY3k6IFwiTVhOXCIsXG4gICAgfSk7XG5cbiAgICAvLyBJbnNlcnRhciBlbCB0b3RhbCB5IGRpc3BvbmlibGUgZW4gZWwgSFRNTFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgI2J1ZGdldENhcmRUb3RhbGBcbiAgICApLnRleHRDb250ZW50ID0gYCR7Zm9ybWF0dGVkVG90YWx9YDtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCNidWRnZXRDYXJkQXZhaWxhYmxlYFxuICAgICkudGV4dENvbnRlbnQgPSBgJHtmb3JtYXR0ZWRBdmFpbGFibGV9YDtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCNidWRnZXRDYXJkU3BlbnRgXG4gICAgKS50ZXh0Q29udGVudCA9IGAke2Zvcm1hdHRlZFNwZW50fWA7XG4gIH1cblxuICBwcmludEFsZXJ0cyhtZXNzYWdlLCB0eXBlQWxlcnQpIHtcbiAgICAvLyBDcmVhciBlbCBkaXYgZGUgbGEgYWxlcnRhXG4gICAgY29uc3QgYWxlcnRNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgcGApO1xuICAgIGFsZXJ0TWVzc2FnZS5jbGFzc0xpc3QuYWRkKGBhbGVydGApO1xuXG4gICAgLy8gQWdyZWdhciBlbCBtZW5zYWplIHkgZWwgdGlwbyBkZSBhbGVydGEgYWwgcCBkZSBsYSBhbGVydGFcbiAgICBpZiAodHlwZUFsZXJ0ID09PSBgZXJyb3JgKSB7XG4gICAgICBhbGVydE1lc3NhZ2UuY2xhc3NMaXN0LmFkZChgYWxlcnQtLWVycm9yYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0TWVzc2FnZS5jbGFzc0xpc3QuYWRkKGBhbGVydC0tc3VjY2Vzc2ApO1xuICAgIH1cblxuICAgIC8vIEFncmVnYXIgYWwgZGl2IGVsIG1lbnNhamVcbiAgICBhbGVydE1lc3NhZ2UudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuXG4gICAgLy8gSW5zZXJ0YXIgbGEgYWxlcnRhIGFsIEhUTUxcbiAgICBjb25zdCBidWRnZXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2J1ZGdldEZvcm1gKTtcbiAgICBidWRnZXRGb3JtLmFwcGVuZENoaWxkKGFsZXJ0TWVzc2FnZSk7XG5cbiAgICAvLyBFbGltaW5hciBsYSBhbGVydGEgZGVzcHXDqXMgZGUgMyBzZWd1bmRvc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYWxlcnRNZXNzYWdlLnJlbW92ZSgpO1xuICAgIH0sIDMwMDApO1xuICB9XG5cbiAgYWRkRXhwZW5zZUxpc3QoZXhwZW5zZXMpIHtcbiAgICAvLyBMaW1waWFyIGxhIGxpc3RhIGRlIGdhc3Rvc1xuICAgIHRoaXMuY2xlYW5IdG1sKCk7XG5cbiAgICAvLyBJdGVyYXIgbG9zIGdhc3Rvc1xuICAgIGV4cGVuc2VzLmZvckVhY2goKGV4cGVuc2UpID0+IHtcbiAgICAgIGNvbnN0IHsgaW5wdXROYW1lLCBpbnB1dEFtb3VudCwgc2VsZWN0ZWRDYXRlZ29yeSwgaWQgfSA9IGV4cGVuc2U7XG5cbiAgICAgIC8vIEZvcm1hdGVhciBsYSBjYW50aWRhZFxuICAgICAgY29uc3QgZm9ybWF0dGVkQW1vdW50ID0gaW5wdXRBbW91bnQudG9Mb2NhbGVTdHJpbmcoXCJlcy1NWFwiLCB7XG4gICAgICAgIHN0eWxlOiBcImN1cnJlbmN5XCIsXG4gICAgICAgIGN1cnJlbmN5OiBcIk1YTlwiLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWFyIGVsIExpXG4gICAgICBjb25zdCBuZXdFeHBlbnNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgbGlgKTtcbiAgICAgIG5ld0V4cGVuc2UuY2xhc3NOYW1lID0gYGV4cGVuc2UtaXRlbWA7XG4gICAgICBuZXdFeHBlbnNlLmRhdGFzZXQuaWQgPSBpZDtcbiAgICAgIG5ld0V4cGVuc2UuZGF0YXNldC5jYXRlZ29yeSA9IHNlbGVjdGVkQ2F0ZWdvcnk7XG5cbiAgICAgIC8vIEFncmVnYXIgZWwgSFRNTFxuICAgICAgbmV3RXhwZW5zZS5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJleHBlbnNlLWl0ZW1fX3RleHRzXCI+XG4gICAgICAgICAgPHAgY2xhc3M9XCJleHBlbnNlLWl0ZW1fX2Rlc2NyaXB0aW9uXCI+JHtpbnB1dE5hbWV9PC9wPlxuICAgICAgICAgIDxwIGNsYXNzPVwiZXhwZW5zZS1pdGVtX19wcmljZVwiPiR7Zm9ybWF0dGVkQW1vdW50fTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuXG4gICAgICAvLyBCb3TDs24gcGFyYSBib3JyYXIgZWwgZ2FzdG9cbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYGJ1dHRvbmApO1xuICAgICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoYGV4cGVuc2UtaXRlbV9fYnRuYCk7XG4gICAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBgWGA7XG5cbiAgICAgIC8vIEHDsWFkaXIgZWwgYm90w7NuIGFsIExpXG4gICAgICBuZXdFeHBlbnNlLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG5cbiAgICAgIC8vIEHDsWFkaXIgZWwgTGkgYWwgVWxcbiAgICAgIGV4cGVuc2VzTGlzdC5hcHBlbmRDaGlsZChuZXdFeHBlbnNlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsZWFuSHRtbCgpIHtcbiAgICB3aGlsZSAoZXhwZW5zZXNMaXN0LmZpcnN0Q2hpbGQpIHtcbiAgICAgIGV4cGVuc2VzTGlzdC5yZW1vdmVDaGlsZChleHBlbnNlc0xpc3QuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9XG59XG5cbi8vIEluc3RhbmNpYXIgbGEgVUlcbmNvbnN0IHVzZXJJbnRlcmZhY2UgPSBuZXcgVXNlckludGVyZmFjZSgpO1xuXG4vKiBGdW5jaW9uZXMgKi9cbmZ1bmN0aW9uIHJlcXVlc3ROYW1lKCkge1xuICBsZXQgdXNlck5hbWU7XG5cbiAgLy8gU29saWNpdGFyIGVsIG5vbWJyZSBkZWwgdXN1YXJpbyBoYXN0YSBxdWUgc2UgaW5ncmVzZSB1biB2YWxvciB2w6FsaWRvXG4gIGRvIHtcbiAgICB1c2VyTmFtZSA9IHByb21wdChgwr9DdcOhbCBlcyB0dSBub21icmU/YCk7XG5cbiAgICAvLyBWYWxpZGFyIGVsIG5vbWJyZVxuICAgIGlmICghdXNlck5hbWUpIHtcbiAgICAgIGFsZXJ0KGBQb3IgZmF2b3IsIGludHJvZHVjZSB1biBub21icmUgdsOhbGlkby5gKTtcbiAgICB9XG4gIH0gd2hpbGUgKCF1c2VyTmFtZSk7XG5cbiAgLy8gTGxhbWFyIGFsIG3DqXRvZG8gcGFyYSBpbnNlcnRhciBlbCBub21icmUgZW4gbGEgVUlcbiAgdXNlckludGVyZmFjZS5pbnNlcnROYW1lKHVzZXJOYW1lKTtcbn1cblxuZnVuY3Rpb24gcmVxdWVzdEJ1ZGdldCgpIHtcbiAgY29uc3QgdXNlckJ1ZGdldCA9IE51bWJlcihwcm9tcHQoYMK/Q3XDoWwgZXMgdHUgcHJlc3VwdWVzdG8/YCkpO1xuICBjb25zdCB2b2lkVmFsdWUgPSBgYDtcblxuICBpZiAoXG4gICAgdXNlckJ1ZGdldCA9PT0gdm9pZFZhbHVlIHx8XG4gICAgdXNlckJ1ZGdldCA9PT0gbnVsbCB8fFxuICAgIGlzTmFOKHVzZXJCdWRnZXQpIHx8XG4gICAgdXNlckJ1ZGdldCA8PSAwXG4gICkge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfVxuXG4gIC8vIENyZWFyIGluc3RhbmNpYSBkZSBcIkJ1ZGdldFwiIHkgZXN0YWJsZWNlcmxvXG4gIGJ1ZGdldCA9IG5ldyBCdWRnZXQodXNlckJ1ZGdldCk7XG5cbiAgLy8gTGxhbWFyIGFsIG3DqXRvZG8gcGFyYSBpbnNlcnRhciBlbCBwcmVzdXB1ZXN0byBlbiBsYSBVSVxuICB1c2VySW50ZXJmYWNlLmluc2VydEJ1ZGdldChidWRnZXQpO1xufVxuXG5mdW5jdGlvbiBidWRnZXRGb3JtRXZlbnRzKCkge1xuICAvLyBPYnRlbmVyIGVsIGZvcm11bGFyaW8geSBzdXMgZXZlbnRvc1xuICBjb25zdCBidWRnZXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2J1ZGdldEZvcm1gKTtcbiAgYnVkZ2V0Rm9ybS5hZGRFdmVudExpc3RlbmVyKGBzdWJtaXRgLCBhZGRFeHBlbnNlKTtcbn1cblxuZnVuY3Rpb24gYWRkRXhwZW5zZShlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICAvLyBPYnRlbmVyIGxvcyB2YWxvcmVzIGRlbCBmb3JtdWxhcmlvXG4gIGNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNidWRnZXRGb3JtTmFtZWApLnZhbHVlO1xuICBjb25zdCBpbnB1dEFtb3VudCA9IE51bWJlcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjYnVkZ2V0Rm9ybUFtb3VudGApLnZhbHVlKTtcbiAgY29uc3Qgc2VsZWN0ZWRDYXRlZ29yeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNidWRnZXRGb3JtQ2F0ZWdvcnlgKS52YWx1ZTtcbiAgbGV0IHZvaWRWYWx1ZSA9IGBgO1xuXG4gIC8vIFZhbGlkYXIgcXVlIG5pbmd1bm8gZGUgbG9zIGNhbXBvcyBlc3TDqSB2YWPDrW9cbiAgaWYgKFxuICAgIGlucHV0TmFtZSA9PT0gdm9pZFZhbHVlIHx8XG4gICAgaW5wdXRBbW91bnQgPT09IHZvaWRWYWx1ZSB8fFxuICAgIHNlbGVjdGVkQ2F0ZWdvcnkgPT09IHZvaWRWYWx1ZVxuICApIHtcbiAgICB1c2VySW50ZXJmYWNlLnByaW50QWxlcnRzKGBUb2RvcyBsb3MgY2FtcG9zIHNvbiBvYmxpZ2F0b3Jpb3NgLCBgZXJyb3JgKTtcblxuICAgIHJldHVybjtcbiAgfSBlbHNlIGlmIChpbnB1dEFtb3VudCA8PSAwIHx8IGlzTmFOKGlucHV0QW1vdW50KSkge1xuICAgIHVzZXJJbnRlcmZhY2UucHJpbnRBbGVydHMoYENhbnRpZGFkIG5vIHZhbGlkYWAsIGBlcnJvcmApO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ3JlYXIgb2JqZXRvIGNvbiBlbCBnYXN0b1xuICBjb25zdCBleHBlbnNlID0geyBpbnB1dE5hbWUsIGlucHV0QW1vdW50LCBzZWxlY3RlZENhdGVnb3J5LCBpZDogRGF0ZS5ub3coKSB9O1xuXG4gIC8vIEHDsWFkaXIgZWwgZ2FzdG8gYSBsYSBsaXN0YSB5IGFsIHByZXN1cHVlc3RvXG4gIGJ1ZGdldC5uZXdFeHBlbnNlcyhleHBlbnNlKTtcblxuICAvLyBJbXByaW1pciB1bmEgYWxlcnRhIGRlIGV4aXRvXG4gIHVzZXJJbnRlcmZhY2UucHJpbnRBbGVydHMoYFNlIGFncmVnw7MgY29ycmVjdGFtZW50ZWAsIGBzdWNjZXNzYCk7XG5cbiAgLy8gSW1wcmltaXIgZWwgZ2FzdG8gZW4gZWwgSFRNTFxuICBjb25zdCB7IGV4cGVuc2VzIH0gPSBidWRnZXQ7XG4gIHVzZXJJbnRlcmZhY2UuYWRkRXhwZW5zZUxpc3QoZXhwZW5zZXMpO1xuXG4gIC8vIExpbXBpYXIgbG9zIGNhbXBvcyBkZWwgZm9ybXVsYXJpb1xuICBjb25zdCBidWRnZXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2J1ZGdldEZvcm1gKTtcbiAgYnVkZ2V0Rm9ybS5yZXNldCgpO1xufVxuIl19
